<ion-content>
  <ion-row>
    <ion-col style="height: 100vh; overflow: auto;" size="12" size-sm="12" size-md="4" size-lg="4">  
      <ion-toolbar class="toolbar" color="primary">   
        <img slot="start"  class="toolbar-icon" src="../../../assets/icon/favicon.png"> 
        <ion-title>Retailgate</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="onMenu($event)" >
            <ion-icon slot="icon-only"
            name="menu-outline"></ion-icon>
          </ion-button>
        </ion-buttons> 
      </ion-toolbar>
      <div class="blocks-word-main-con"> 
        <h1>Blocks</h1>
        <div class="btn-deploy-con">
          <ion-button color="primary"
          (click)="onDeploy()">
            <ion-icon name="rocket-outline" slot="start"></ion-icon>
            Deploy
          </ion-button>
          <ion-buttons>
            <ion-button class="cust-color" color="danger"
             (click)="onClearAll()">
              Clear All
            </ion-button>
          </ion-buttons>
        </div>
        <div class="blocks-container" >
          <ion-searchbar
          mode="ios"  #searchWord
             (ionInput)="onSearch(searchWord.value)"
             (ionCancel)="onSearch('')">
           </ion-searchbar> 
          <ion-row>
            <ion-col *ngFor="let data of maindatas;index as i"
            size="12"
            size-sm="12"
            size-md="12"
            size-lg="6" [hidden]="!search_blocks[i]">  
              <div  class="block-container" [ngStyle]="block_index == i?{'background-color': '#B3D9FB'} : {'background-color': 'white'}" >
                <p class="block-title" (click)="onBlocks(data,i)">{{data.block_name}}</p>
                <img *ngIf="i>1 " (click)="onDelBlock(i)" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAAxklEQVRIie2VsQrCQAyG/4Sgu5ujL1Vo7g2kg7oK7uKkoG/Qvpng5tClghAXC0Xba62KCPdPF3L5v0vu4AgtStM0YeaFmU0eUkcAuziON0RkTfXkM8+ybApg79tjZjPn3LYpz75iIprfTZZ5ng9UlVSVRETMbAUAzJx4PSqnbWyzj1SVgJYO/kJPl/zuqERkHEXRqYy/PqLfAsqX0HX9MuATCoAACIAA6KC6/6AAMOxraGYj59y5jOs6WAO49PC+AjhUzQHgBqFBOWBaSTLKAAAAAElFTkSuQmCC">
              </div>
            </ion-col> 
          </ion-row>
        </div>
        <div class="blocks-container"  > 
          <ion-button (click)="addBlock()"  color="primary" fill="outline" style="width:100% ;height: 40px;"> 
            Add Block
          </ion-button>
        </div>
      </div>
      <app-word-matching-content #wordmatching [maindatas]="maindatas"
       [wmatchingdtas]="wmatchingdtas"></app-word-matching-content>
    </ion-col>
    
    <ion-col size="12" size-sm="12" size-md="8" size-lg="8">
      <input  id="fUploadAuto"
      #fUploadAuto type="file"
      (click)="fUploadAuto.value = null" 
      (change)="onCMinBImg(fUploadAuto.files[0])"  
      style="display:none"
      accept=".png, .jpg, .jpeg">
      <div class="builder-container" > 
        <!-- <h1 class="builder-block-title">{{block.block_name}}</h1> -->
        <input [readonly]="block_index == 0 || block_index == 1" 
        [(ngModel)]="block.block_name"  
        (focusout)="kFocusOTitle(block.block_name)"
         type="text" class="builder-block-title"> 
        <div class="arrange-main slides-sub-arrange" > 
          <div *ngFor="let min_block of block.mini_blocks;index as i"
           class="arrange slide" (click)="onNavMinblock(i)"
           [class]="min_block.type == 'text-only' || min_block.type == 'button-text-only' ?'txt-color':'' ||
            min_block.type == 'image-only'?'img-color':'' ||
            min_block.type == 'carousel-only'?'car-color':''||
            min_block.type == 'quickreply-only'?'qreply-color':''" >  
            <h3>{{i +1}}.</h3>
            <h5>{{min_block.type == 'text-only' ?'Text':'' ||
              min_block.type == 'button-text-only'?'Text button':'' ||
              min_block.type == 'image-only'?'Image':'' ||
              min_block.type == 'carousel-only'?'Carousel':'' ||
              min_block.type == 'quickreply-only'?'Quick Reply':''}}</h5> 
            <input  id="subsets[]" type="hidden" [value]="min_block | json">
          </div>   
        </div>  
        <div class="slides-main-arrange" > 
          <div class="slide" *ngFor="let min_block of block.mini_blocks;index as i"> 
            <div class="builder-block-container"   *ngIf="min_block.type != 'cback-only' && min_block.type != 'livechat-only'  ">
              <input  id="mainsets[]" type="hidden" [value]="min_block | json">
              <div>
                <div>
                  <img class="logo-nresize" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAABj0lEQVRIidWWPy8EQRjGn3du9hKFkIhIlD7C7SUqEf8ajY7u3J7beb+ABKFQCEqaS26buZYPoBENQrVXq7TEKbR2LjsaFBJ7s4fCU87zPO9vkslkBsghZt5g5o08nYJrUCm1CeAAwLzv+69xHF//GiAMw3UiqgI4AXALYKlcLo/EcXzZqysch9eklLMAHgE8G2PmrLXLzLzzIwAzV4ho1Rgz3Wg0Hj/Wtdadd8gKM1f6Blhrz5MkmdJad756WutOkiRT1trzrBkyy4yi6CHLb7VaLwBesjI9z+Cn+nMAMbNyDadpuggAQogz145M03Qix4bu3kF5Ov9cFIbhoXOYiKy1Ng9ACiHuXcP9HHIuKaW2lVLbeTr//6JlAur1+phSaug7v1qtDtdqtfG+AYVCYQHAdRAEo1+9IAhGi8Xiled581kzKMsEPh+cNSnlTLfbXQMAY0zked4FEZ02m829zE32ArTb7ZtSqTRgrT0G8EREA0KIXZfhToAPiO/7gwC2AEwCOIqiaN+lm0v9fFveAA3EkwkZ3V4jAAAAAElFTkSuQmCC">
                  <div class="tooltip"> 
                    <img class="logo-del" (click)="onDelMiniBlock(i)" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAAxklEQVRIie2VsQrCQAyG/4Sgu5ujL1Vo7g2kg7oK7uKkoG/Qvpng5tClghAXC0Xba62KCPdPF3L5v0vu4AgtStM0YeaFmU0eUkcAuziON0RkTfXkM8+ybApg79tjZjPn3LYpz75iIprfTZZ5ng9UlVSVRETMbAUAzJx4PSqnbWyzj1SVgJYO/kJPl/zuqERkHEXRqYy/PqLfAsqX0HX9MuATCoAACIAA6KC6/6AAMOxraGYj59y5jOs6WAO49PC+AjhUzQHgBqFBOWBaSTLKAAAAAElFTkSuQmCC">
                    <span class="tooltiptext">Delete mini block</span>
                  </div>
                </div>
                <div>
                  <!-- TEXT BUTTON -->
                  <div id="min_block_{{i}}" class="txt-container block-card" 
                  *ngIf="min_block.type == 'button-text-only' || min_block.type == 'text-only'">
                    <div class="textarea-container"> 
                      <textarea class="txt" #textminblock (keyup)="kTitleTxt(textminblock.value,min_block,i)" >{{min_block.type == 'text-only'? min_block.message.text : min_block.message.attachment.payload.text}} </textarea>
                      <!-- <ion-buttons>
                        <ion-button (click) ="onEmojiPicker(i)" style="margin-left: auto;">
                          <ion-icon slot="icon-only"
                          name="{{showEmojiPickers[i] ? 'close-outline' : 'happy-outline'}}"></ion-icon>
                        </ion-button>
                      </ion-buttons>  
                      <emoji-mart class="emoji-mart" set="facebook"  [hidden]="!showEmojiPickers[i]"
                      (emojiSelect)="addEmojiTextBtnOnly($event,textminblock.value,min_block,i)" 
                      title="Pick your emoji.â€¦"></emoji-mart>   -->
                    </div>
                    <div class="buttons-container"
                    *ngIf="min_block.type == 'button-text-only'">
                      <div [class]="btn.title == '' ? 'err-button':'button'"
                       *ngFor="let btn of min_block.message.attachment.payload.buttons; index as x"
                      (click)="onBtnTxtEdit($event,i,x,btn.title,btn.url)">
                        <p class="button-title">{{btn.title == '' ? 'Enter button name':btn.title}}</p>
                        <div class="button-main">
                          <p class="button-url func" *ngIf="btn.type =='web_url'">{{btn.url}}</p>
                          <div class="button-subtitle func" *ngIf="btn.type =='postback'">
                            <ion-row>
                              <ion-col size="auto" *ngFor="let payload of btn.payload" >
                                <p class="block-style" *ngIf="payload.ischecked">{{payload.block_name}} </p></ion-col>
                              </ion-row>
                          </div> 
                          <div class="tooltip"> 
                            <img class="logo-del" (click)="onDelTxtBtn(i,x)" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAAxklEQVRIie2VsQrCQAyG/4Sgu5ujL1Vo7g2kg7oK7uKkoG/Qvpng5tClghAXC0Xba62KCPdPF3L5v0vu4AgtStM0YeaFmU0eUkcAuziON0RkTfXkM8+ybApg79tjZjPn3LYpz75iIprfTZZ5ng9UlVSVRETMbAUAzJx4PSqnbWyzj1SVgJYO/kJPl/zuqERkHEXRqYy/PqLfAsqX0HX9MuATCoAACIAA6KC6/6AAMOxraGYj59y5jOs6WAO49PC+AjhUzQHgBqFBOWBaSTLKAAAAAElFTkSuQmCC">
                            <span class="tooltiptext">Delete button</span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div *ngIf="min_block.message.attachment && min_block.message.attachment.payload.buttons.length !=3"> 
                      <div class="button-add" (click)="addTextButton($event,i)" >
                        <div class="plus-container"> <img src="https://img.icons8.com/android/24/000000/plus.png"/></div>
                        <p class="add-button-txt">ADD BUTTON (OPTIONAL)</p>
                      </div>
                    </div> 
                    <div *ngIf="!min_block.message.attachment"> 
                      <div class="button-add" (click)="addTextButton($event,i)" >
                        <div class="plus-container"> <img src="https://img.icons8.com/android/24/000000/plus.png"/></div>
                        <p class="add-button-txt">ADD BUTTON (OPTIONAL)</p>
                      </div>
                    </div> 
                  </div>  
                  <!-- IMAGE -->
                  <div id="min_block_{{i}}" class="img-container block-card"
                  *ngIf="min_block.type == 'image-only'"
                  (click)="onGetImg(i,'image',-1)"> 
                    <img class="upimg" *ngIf="min_block.message.attachment.payload.url != ''" src="{{min_block.message.attachment.payload.url}}" alt="">
                    <div *ngIf="min_block.message.attachment.payload.url == ''" class="img-con-sub">
                      <img src="data:image/png;base64,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">
                      <h2>Upload image</h2> 
                    </div>
                  </div> 
                  <!-- CAROUSEL -->
                  <div id="min_block_{{i}}" class="car-main-con" *ngIf="min_block.type == 'carousel-only'">
                    <div class="car-container block-card"
                    *ngFor="let car of min_block.message.attachment.payload.elements;index as ie">
                    
                      <div class="car-img" (click)="onGetImg(i,'carousel',ie)"> 
                        <img class="upimg" *ngIf="car.image_url != ''" src="{{car.image_url}}" alt="">
                        <div  *ngIf="car.image_url == ''" > 
                          <img src="data:image/png;base64,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">
                          <h2>Upload image</h2> 
                        </div>
                      </div>
                      <ion-item class="item-transaparent" color="light" [class]="car.title == ''? 'err-text':''"> 
                        <ion-label position="stacked">{{car.title != ''? 'Title':'Title (required)'}}</ion-label>
                        <ion-input [(ngModel)]="car.title" #cartitle (keyup)="kCarTxt(cartitle.value,'','',ie,i)"> </ion-input>
                      </ion-item>
                      <ion-item  class="item-transaparent" color="light"  > 
                        <ion-label position="stacked">Subtitle</ion-label>
                        <ion-input [(ngModel)]="car.subtitle" #carsubtitle (keyup)="kCarTxt('',carsubtitle.value,'',ie,i)"></ion-input>
                      </ion-item>
                      <ion-item  class="item-transaparent" color="light"  >  
                        <ion-label position="stacked">Url</ion-label>
                        <ion-input [(ngModel)]="car.default_action.url" #carurl (keyup)="kCarTxt('','',carurl.value,ie,i)"></ion-input>
                        <!-- <ion-input [(ngModel)]="car.image_url" #carimage_url (keyup)="kCarTxt('','',carimage_url.value,ie,i)"></ion-input> -->
                      </ion-item> 
                      <!-- CAROUSEL WITH BUTTONS -->
                      <div class="buttons-container" >
                        <div *ngFor="let btn of min_block.message.attachment.payload.elements[ie].buttons; index as x"
                        [class]="btn.title == '' ? 'err-button':'button'" >
                          <p class="button-title" (click)="onBtnCarEdit($event,i,x,btn.title,btn.url,ie)">{{btn.title == '' ? 'Enter button name':btn.title}}</p>
                          <div class="button-main" >
                            <p class="button-url func" *ngIf="btn.type =='web_url'" (click)="onBtnCarEdit($event,i,x,btn.title,btn.url,ie)">{{btn.url}}</p>
                            <div class="button-subtitle func" *ngIf="btn.type =='postback'" (click)="onBtnCarEdit($event,i,x,btn.title,btn.url,ie)">
                              <ion-row>
                                <ion-col size="auto" *ngFor="let payload of btn.payload" >
                                  <p  class="block-style" *ngIf="payload.ischecked">{{payload.block_name}} </p></ion-col>
                                </ion-row>
                            </div> 
                            <div class="tooltip"> 
                              <img class="logo-del" (click)="onDelCarBtn(i,ie,x)" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAAxklEQVRIie2VsQrCQAyG/4Sgu5ujL1Vo7g2kg7oK7uKkoG/Qvpng5tClghAXC0Xba62KCPdPF3L5v0vu4AgtStM0YeaFmU0eUkcAuziON0RkTfXkM8+ybApg79tjZjPn3LYpz75iIprfTZZ5ng9UlVSVRETMbAUAzJx4PSqnbWyzj1SVgJYO/kJPl/zuqERkHEXRqYy/PqLfAsqX0HX9MuATCoAACIAA6KC6/6AAMOxraGYj59y5jOs6WAO49PC+AjhUzQHgBqFBOWBaSTLKAAAAAElFTkSuQmCC">
                              <span class="tooltiptext">Delete button</span>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- CAROUSEL ADD BUTTONS --> 
                      <div  > 
                        <div class="button-add" (click)="addCarButton($event,i,ie)" >
                          <div class="plus-container"> <img src="https://img.icons8.com/android/24/000000/plus.png"/></div>
                          <p class="add-button-txt">ADD BUTTON (OPTIONAL)</p>
                        </div>
                      </div>  
                    </div>  
                    <div *ngIf="min_block.message.attachment.payload.elements.length <= 9"  class="add-car block-card tooltip" (click)="onAddCarElem(i)">
                      <img src="data:image/png;base64,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">
                      <span class="tooltiptext">Add carousel</span>
                    </div>
                  </div>
                  <!-- QUICKREPLY -->
                  <div id="min_block_{{i}}" class="qreply-main-con" *ngIf="min_block.type == 'quickreply-only'">
                    <input (keyup)="kQreplyTxt(i,qreplytxt.value)" #qreplytxt class="qreply-txt" type="text" placeholder="Input some text" [(ngModel)]="min_block.message.text">
                    <div class="con">
                      <div *ngIf="min_block.message.quick_replies.length > 0" style="display: inline-flex;">
                        <div [class]="qreply.title == '' ? 'err-qreply-button':'qreply-button'" 
                           *ngFor="let qreply of min_block.message.quick_replies;index as qreply_i" >
                          <p class="button-title" (click)="onQreplyEdit($event,i,qreply_i,qreply.title)">{{qreply.title == '' ? 'Enter button name':qreply.title}}</p>
                          <div class="button-main"> 
                            <div class="button-subtitle func" (click)="onQreplyEdit($event,i,qreply_i,qreply.title)" >
                              <ion-row>
                                <ion-col size="auto" *ngFor="let payload of qreply.payload" >
                                  <p  class="block-style" *ngIf="payload.ischecked">{{payload.block_name}}  </p></ion-col>
                              </ion-row>
                            </div> 
                            <div class="tooltip"> 
                              <img class="logo-del" (click)="onDelQreply(i,qreply_i)" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAAxklEQVRIie2VsQrCQAyG/4Sgu5ujL1Vo7g2kg7oK7uKkoG/Qvpng5tClghAXC0Xba62KCPdPF3L5v0vu4AgtStM0YeaFmU0eUkcAuziON0RkTfXkM8+ybApg79tjZjPn3LYpz75iIprfTZZ5ng9UlVSVRETMbAUAzJx4PSqnbWyzj1SVgJYO/kJPl/zuqERkHEXRqYy/PqLfAsqX0HX9MuATCoAACIAA6KC6/6AAMOxraGYj59y5jOs6WAO49PC+AjhUzQHgBqFBOWBaSTLKAAAAAElFTkSuQmCC">
                              <span class="tooltiptext">Delete quick reply</span>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="qreply-add-btn tooltip" *ngIf="min_block.message.quick_replies.length <= 12" (click)="onAddQReply(i)">
                        <img src="data:image/png;base64,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">
                        <span class="tooltiptext">Add quick reply</span>
                      </div>
                    </div>
                  </div>  
                  <!-- Live Chat -->
                  <div id="min_block_{{i}}"  class="txt-container block-card" 
                  *ngIf="min_block.type == 'livechat-only'">
                    <div class="textarea-container"> 
                      <textarea  class="txt"  #lchatminblock 
                      (keyup)="kTitleTxt(lchatminblock.value,min_block,i)"  > {{min_block.message.attachment.payload.text }} </textarea>
                    
                    </div>
                    <div class="buttons-container"
                    *ngIf="min_block.type == 'livechat-only'">
                      <div 
                      [class]="btn.title == '' ? 'err-button':'button'"
                      *ngFor="let btn of min_block.message.attachment.payload.buttons; index as x;
                      let title = 'title';"
                      (click)="onLChatEdit($event,i,btn.title,btn.payload.blocks,x)"> 
                        <p class="button-title">{{btn.title == '' ? 'Enter button name':btn.title}}</p>
                        <div class="button-main"> 
                          <div class="button-subtitle func" 
                          *ngIf="btn.type =='postback'">
                            <ion-row>
                              <ion-col size="auto" *ngFor="let payload of btn.payload.blocks" >
                                <p class="block-style" *ngIf="payload.ischecked">{{payload.block_name}} </p></ion-col>
                            </ion-row>
                          </div>   
                          <div class="tooltip"> 
                            <img class="logo-del" (click)="onDelLChatBtn(i,x)"
                              src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAAxklEQVRIie2VsQrCQAyG/4Sgu5ujL1Vo7g2kg7oK7uKkoG/Qvpng5tClghAXC0Xba62KCPdPF3L5v0vu4AgtStM0YeaFmU0eUkcAuziON0RkTfXkM8+ybApg79tjZjPn3LYpz75iIprfTZZ5ng9UlVSVRETMbAUAzJx4PSqnbWyzj1SVgJYO/kJPl/zuqERkHEXRqYy/PqLfAsqX0HX9MuATCoAACIAA6KC6/6AAMOxraGYj59y5jOs6WAO49PC+AjhUzQHgBqFBOWBaSTLKAAAAAElFTkSuQmCC">
                            <span class="tooltiptext">Delete button</span>
                          </div>
                        </div>
                      </div>
                    </div>  
                    <div *ngIf="!isUserStopChatLive" > 
                      <div class="button-add" (click)="addLChatButton($event,i)" >
                        <div class="plus-container"> <img src="https://img.icons8.com/android/24/000000/plus.png"/></div>
                        <p class="add-button-txt">ADD STOP LIVE CHAT BUTTON </p>
                      </div>
                    </div> 
                    <div *ngIf="!isUserFollowUp"> 
                      <div class="button-add" (click)="addLUPChatButton($event,i)" >
                        <div class="plus-container"> <img src="https://img.icons8.com/android/24/000000/plus.png"/></div>
                        <p class="add-button-txt">ADD FOLLOW UP BUTTON </p>
                      </div>
                    </div> 
                    <!-- <div *ngIf="!min_block.message.attachment"> 
                      <div class="button-add" (click)="addTextButton($event,i)" >
                        <div class="plus-container"> <img src="https://img.icons8.com/android/24/000000/plus.png"/></div>
                        <p class="add-button-txt">ADD BUTTON (OPTIONAL)</p>
                      </div>
                    </div>  -->
                  </div>  
                  <!-- URL Callback -->
                  <div *ngIf="min_block.type == 'cback-only' "  class="cback-container block-card">
                    <h2>URL Callback</h2>
                    <input [(ngModel)]="min_block.message.url" (keyup)="kURLCback()"
                    class="cback-input" >
                    <div class="cback-block" (click)="onActionCback($event,'resolve',i)">
                      <h3>Resolve block</h3>
                    </div>
                    <div class="list-block"  *ngIf="min_block.message.resolve_blocks.length > 0 ">
                      <ion-row >
                        <div *ngFor="let res_block of min_block.message.resolve_blocks">
                          <ion-col *ngIf="res_block.ischecked" >
                            <p class="block-style">{{res_block.block_name}}</p>
                          </ion-col>
                        </div>
                      </ion-row>
                    </div>
                    <div class="cback-block" (click)="onActionCback($event,'reject',i)">
                      <h3>Reject block</h3>
                    </div>
                    <div class="list-block" *ngIf="min_block.message.reject_blocks.length != 0">
                      <ion-row>
                        <div *ngFor="let rej_block of min_block.message.reject_blocks">
                          <ion-col  *ngIf="rej_block.ischecked">
                            <p class="block-style" >{{rej_block.block_name}}</p>
                          </ion-col> 
                        </div>
                      </ion-row>
                    </div>
                  </div>
                  <div class="line-bottom"> 
                  </div>
                </div>
              </div> 
            </div> 
          </div>
        </div>     

        <div class="mini-block"  > 
          <h2>Add mini block</h2> 
          <div class="mini-blocks-con" > 
            <div class="btn-mini-block-con txt-color"
             (click)="onAddTxtMiniBlock()" >
              <div > 
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAA9UlEQVRoge3ZSw6DMAwEULvqLVr1PKXX5iaQewwrJJpSMPmABfN2SOQzUZKFI0JEdDoAPgAC9tcDaCxzVGOQICKPrNVI16vqq0hP4/IU6azSuLfak9lLUhAArXGPtzlttrCeEYiIqKpOv00DFGgzfi+5WztfGnDOv4mntLG43BkJIj+3SFdhPnXHAdAA6CYHsgPwXmnzdXVartKUcapLCZLjcmfEPQbxhkG8YRBvGMQbBvGGQbxhEG8YxBsG8YZBYojeUBb+G5nfPnaF+YegtSJ2jSJfnq11q9J1rtOckaxqfCSIyHPjKrvcWnHdds3xdV0iosMMllL7AVSCAxwAAAAASUVORK5CYII=">
                <h5>Text</h5>
              </div>
            </div>  
            <div class="btn-mini-block-con img-color"
             (click)="onAddImgMiniBlock()" >
              <div > 
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAB90lEQVRoge3ZTWoUQRjG8bQozJi4dNAzuAiu4lojbkTQQ3iMfEgWyQG8gGcQxLXoXgNmkYBBwUVcC46IvyymJjRtT3dP2zNdaD0w1MzbvFXPv+utKrpnZSUpKem/UAZ9m+hCl/o20JUuT79kWZb1aaStphX1z8xIAolNCSQ2RQOCq3iGE4xDu4Nh0w70fShiiHfK9bYK5sJ/JCC7wcYn3MMqNnEa4tsVuVGBnAQbdwvxzRA/rsiNCmQcbKwV4tdC/EdFLmi82DHC+t8YrtCX0G4U4ndC+7m2hyYzEiAO8RGD+X3WetgJNk5DOa3hfm6NbNX6rwPJQUx1sACQocnuVKY3VTevEUgB4hi/wqdYAl3ADLAdxhmHdquuAmpBcB0fwuUj3MBB7nezg2rBqgQpzMQhRiE+MFknsD+j4yvLAMiNVw4yCyJ3fSNXYg/xGHt4hbOynKWDlJXTjOR91TrCzV5A6maikDwtsbMwE3t4gvWmfSwSZC4DZuwm89yQLlQGUllOc3aeL9Gq8ru9CJBOIHIDNIH5aXKqt34uKgNZ5k4zxHP8DmO/1nJz+AOka7MNTTzA12DhGx616KN/kGBkhJe5yniB1Tny4wAJZjI8xfeaNTVTUYBMhVt43wbk4m18evcbiRJIbEogsSmBxKb0r25SUlJSLzoHG4CZaAyB5VAAAAAASUVORK5CYII=">
                <h5>Image</h5>
              </div>
            </div>   
            <div class="btn-mini-block-con car-color"
             (click)="onAddCarMiniBlock()" >
              <div > 
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAABYklEQVRoge3ZvUoDQRSG4feIWAmKWhtsxCYI/iCWYmkhCJaSSq1TW3sR3oGV4F0IKhYKWgn2ihamECKfRTYS113NiLOjcB4IS2Zmd8+3u9UccM79axayWNIcMBapFoAnMzuLcmVJW6rGTkhdg7ki68BMydrV7HgFXIc/gm9NA7PAiqTHL9bdmNnlp1FJo5Je+nhCexGKR1KzzzfUljTePa/3DYwAQ8A9cFRwjzqwHKP4nFPgomRuA5gAhoEHyH1CmTsz280PSmpSTYBjM9svmpA0TyfAu4EKCorKA6TmAVLzAKl5gNQ8QGoeIDUPkJoHSM0DpOYBUvMAqXmA1DxAakV7ozVJBwXj9djFZNYlTZbM1fIDvQFawCudzdOgJsMvW8x+ZdrAc/fPhxaTpAVgquTENaBB/AbHIcXb+123ZnYefHVJm6G9oh/aDqmr7yafJAOW6DQXYmkBJ2amiPdwzv0lb+H3Z9I1sDqGAAAAAElFTkSuQmCC">
                <h5>Carousel</h5>
              </div>
            </div>    
            <div class="btn-mini-block-con qreply-color"
             (click)="onAddQreplyMiniBlock()" >
              <div > 
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAE5ElEQVRogdWZbYhUVRjH/8dd2XbWMHJZS9iINl2qFW0rsJWCrZCkFCWKSJEoe5OyL0EfErQPvRgFSWYQREFFpRZBVGQgIhhFbqFEZbS1vhG10K6bRq67++vDeW73zDh7587O3J3tgWHunPu8/P8z9/zPc844ICfplP6f1lQffBiTdKJWSMq0mZKmSZKAHN76aospvQF9hjk3rdZgKrbgFxgGVtcaTykDVhtWgFxIILItwJT7ZQAHbALGAqx5BE4CQ3b9NtBQa9CRAQ2GCcN4shiBPmA+cNg+fwG0TAHw5wN7DNNxoDOcxGepEHAh8LWN9QKX1RD8pcCPhuUA0Grj4xMwhybgQxv/E+iuAfjFQL9h+BQ4N7iXTMCcokkDcAZ4cBLB3w2cttpbgLqC+6UJBM73EctWpgpFvtKMAI+M45eegAUsAQbNbwfQmAH4BuAtq/EXcGuCb3kELKgjCPwSmF1F8LOAvZb7ONBZwr98AhYYKtQvwOVVAD8XOGQ5/1OaTAhYcKhQQ8DSCsDfCAxYrjylyYyAJagDtlrcMLB2AuDvIRaHrRQoTdYE5gIHybdUCkW+PEf2QzmPY6WP0ErghMXsBlYR91A7SVAooBHYHjx+qywHlnNlZgSAemAzXqPHgGejnx1YABy1PF9RZCICF+HVC/NdYON1livKuxmoL4yviAAwO/imBoEVRXzmAD3mM2BAltnrOeJ1pAeYUyR+ReCzmwSZLosA0AUcM5+DwNyExDn8hBzlbBsBXsIfIowXH86tY0BXRQSA9cRK8WZS8YK4NmAD/nnfDjwBtKWMzVktrPb6sgngJ9vrNn4GeDxN8WoacD9xQ/cOMCMVAaAd+M7GjgCLUhasA57Cq8v1VSKxyDBgmNoTCQDLiVfGPaTsd4AWYBexPVwNApa7GfjM8g4Bt49HYIRYyp4m5coIdAO/WY5ow101AlajzjBF+EaKEQC/mNyWMqkDHsXPEYAPgBezIBDUvAW/Q4wsj8Ag6ZWiGd98AfwDrLPxTVkSsBptxOtFLlzxBp1zvSkSdEl6V1KrpF5JdzjnvilwWwKcknRE0mHn3M/VIuCc6wUG5c9HFRI4B7ipRPw1kp6UNF3STklrnXPhgfCAvS+zlyQJOCrpE0m7JA1VxMCwRheO8o/XT0t6zDm3tfAGvofplnSepBmS2iR1SFosqbkSxONYU72kUUk7EpxmSbrBrn+Vf2T2F3N0zo1I+rxwHN9mXyfpXkl3SYoUbq+k3ycE3dtoSQ/g6kAe36DCI0fgSuL9bx/QUUm+tEWXB/LVk1atEvI54HnL1w/MqxbWpKKXAPut6ADFW+pu4Hv8kWQPfgV9Bd8UdnL2AdUzlu8Q0DQZJBqAl63oGPACMD24v5Fk67f4heY/LVhPtmVOIAB6J/E2ch/xoWu0kG0EFuIPxB4CtpG/hx4DPsIf3rbgO4BRYP5kkmjHn+NE3+xSSqzEQCt+nxBtkP4GHsDvFwDemzQCBqgReM2KjwI/JREoiNtA3O+/amSGgQsmC38IaA3xvyYlCQRxVxF3stE2dF3WeMcDcwVegQDWlBE3j/h/AICPs8RZCkwTvuVNPBYpErcsIPBHVvgyNeD9gMTFtcZTtuFbjMhuThs3Zf4Pds59K+mAfUytRFOGgNk+e59ZUxQTNfwpYC9wbdqYfwGGoNnodknNsgAAAABJRU5ErkJggg==">
                <h5>Quick Reply</h5>
              </div>
            </div>    
            <div class="btn-mini-block-con cback-color"
             (click)="onAddCbackMiniBlock()" >
              <div > 
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAFRElEQVRoge2ZaaxdUxTHf+v16WuLkAYpktbQGko1QiRi+ECoeYghYkzEkBBTE1OExBxDTB/EHPSDoiTUTD9QjapKixqK1vihiKGt9lGvfj7sfbmuc84971J9TfpPbs49e63933vtvdbZ66wDa7EWa7FGIwDUQcC2wGYVur8A70bEknak6ihgdIO/AH3AhxHxTf+mWzKYOtd66FXPrOAaqk6tyfW7eodaZmQthPoscBAwB/i0QrcH2B/oBsZFxEcFBlwFXA58DrxVwdUF7A1sDBwXEY92Nv006DJ1uTqshu4NefXOKJG/luW71uA6Nuve3cm8G+gChgHLImJ5Df2G/69bIm8swnf94Gq7cFXo7rDfPurggvYRHXDtoF7c0vYLsACYFhG9lb3zNtZZMdTLagboqBpcB9TgWaQeVsXT6Q48A7xe0H4OsHk/ueYArUE8DNgD2Bd4Up0QEdMKe3e4AxeUyGd3sAOTKnQmZp33ynS6gF5giFpnN9bL17KA723Rq8NV5eO3AguBHdWtihS6gdeACcDr6pcVZIOAA4GVFLsPmWtP0ra/U8EFsFe+vlqmEBGq84CtgE1Jxvwd6tbqhzWDc4V6XtmA6rrqKzW5VO+1zUmsPpF19yqSd0fEAnUnYDywYQVXH/B+RJTGS0QsU/cDtqc6rwL4NCI+b6PTFv8qD/mvoW4EXArsSIpPgJ2ATYDZwE+5bQnweERM/t8nWQZTIljXlRs4d8DsgHok8CQpqM8incZlGJd1v+j0IFsVaJwdL0fEB210F6o/AFt2tVH8P9GRNwwkAzrCGm/AQIqByaTkbc2Dukm+9qjH1ezzndZL4FYZ1KHA7cDp6mkRcb/6mzqW6sfoeGA48NlqM0DdBngsTwZSwgawMzClJs0tq8UA9QTgLlJKvRRYv0k8F3iJ9qnEoxHxWHcmXIf2ydxKUjL3bZvJBTCWlP4C/BgRb2fZEOAG4NwsmwQ8BzzS6B8RU2jaAfVB4BRgYkRMLxpwtPpRzdxjhXp+xeTXU6c16b+pbpFl26rv5Pal6om5/dDc9oJ6lLqrukETZ5d6uDq6aMxQXyQVrGYCX1UsbhfphWYIMD4i5hUYcD1wCTCf5N/XRMQK9XjgbpLLzCUVs+bnPhOAF1qoVgLTganAQxHxfemsTEWtpXWeSOr1ebUKy4vq9Cwfm++Hqvc07cid2Y2a+wxWz1ZvUh9Qn1eXNPX5Ub3Y9MQqHFT/+5f6kfl+Zr7/ST2mzhi5X7e6h/qw2pc5Zqn/qDutqsKW+booX/uAX+uSR0QfMAOYkd3yQWA34A1134j46924wx1oh1FZP9QL1F9N1ejb1J4WzuHqleo16oXqSeruNtVq1WHqlMw952/u1KEBU7Nftv6+bjagqd8u6sdZNtumJ4p6aski/KbOyAsw3ORWjRi7498a0O/Clrq+yadVF5tzHvWM3Pa4enJeiElNBmuqoF+tjjHF04o/FyELf7bYp1sncWMmbFdeH1fBcZJ/PWXuVc/L/68t0N1OvblJf7Z6f/5/H6Rz4BngYNLz+ZOK+feQCmCDKP/AcSVwBfAFMKtFPA+4LiL61DGk03cXUnD3ZNllJUZvCtwJHEFK8oaQ0okRjU9Mc0r8sBXLy1Y/DzRUfbqi/xvqlll3sHqLKbgLd6CFO0yfpJpxSOMjXxfpI19VZbmX9JFvadVAmW8kMIbi99zFEfFWk+5BwHXARRHxUhveLlIl++jcdFO7uQw4qBubAln1uTXunTiXNu/KtyNX51w6hulcUV08YCpz/YHpNF8GA6y42x+oTwE9fwAMPkxh9N2KtwAAAABJRU5ErkJggg==">
                <h5>Url Callback</h5>
              </div>
            </div>    
            <div class="btn-mini-block-con lchat-color"
             (click)="onAddLChatMiniBlock()" >
              <div > 
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAB7klEQVRoge2ZO07DQBRFZwCFkGQfUJAFwF5oULIBCkjDR+yAGtFErAQUeiiI+AixB0SkQNChYBxGjmN77GfiQb6VP+P77tGM9TKOUpUqVapUKgEN4BR4BibIa2K8T4A16fBrwE0BoedpkBdiKXTeU0pt5TF01LZSal/MzUxtoAOgJmb+W6MG9Kw6T5Lm9poXD2/VqVl1Jnm8dMiY6Q2t9exwOUnVCr8D3qkCWLRKBxDRK9I3Pvupvww673qaxle6GUhQfOMrwwxEjIttfF70AdNUx+b0S2u9EtzzYglprT+s02X7nhcAcaoAFq1/B/AVHBT9czqqZhaFAV6t470iIIznnnXpRdL8JKGV2xpbz7WAvsOzto5SZktufPxs6gcuAEAbGGYMfw3UxQDMwDpwDDwR/1llDHSAkWPoifE+ShveCSDBpBaVyGgEdDObJ9cuFGAItAXzRtUuDKAPNAWzzqstDjACOoIZk2qLAtwBG4L50taFPN+RjNE5oW0d0AUOgUbutNE17Q3No6R5E7ic82LHqQ+0LB+Xr+CpGl9agDpwlQEA4B7YdARI3fhcIFb5WT4PwKcjxDuwmwCQqfEVJmAHeIsJvJzssmAB68CttwBKTd+fM28BAkUsKb8AlJpZUv4BKDX9d/TCW4BKvuobfT/nQg1mmhwAAAAASUVORK5CYII=">
                <h5>Live chat</h5>
              </div>
            </div>    
          </div> 
        </div>
      </div>
    </ion-col>
  </ion-row>
  <div class="fb-customerchat"
     page_id="102223365016973">
  </div>
</ion-content>